<Project Sdk="WixToolset.Sdk/6.0.2">

  <PropertyGroup>
    <OutputType>Package</OutputType>
    <OutputName>DOFSetup</OutputName>
    <DefaultTargets>Build</DefaultTargets>
    <TargetFramework>net48</TargetFramework>
    <SuppressIces>ICE57;ICE61</SuppressIces>
  </PropertyGroup>

  <!-- Platform-specific configurations -->
  <PropertyGroup Condition="'$(Platform)' == 'x64'">
    <PlatformTarget>x64</PlatformTarget>
    <OutputPath>bin\$(Platform)\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Platform)\$(Configuration)\</IntermediateOutputPath>
    <WixArch>x64</WixArch>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)' == 'x86'">
    <PlatformTarget>x86</PlatformTarget>
    <OutputPath>bin\$(Platform)\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
    <WixArch>x86</WixArch>
  </PropertyGroup>

  <!-- Debug configuration -->
  <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <DefineConstants>Debug</DefineConstants>
  </PropertyGroup>

  <!-- Project references for file harvesting -->
  <ItemGroup>
    <ProjectReference Include="..\AssemblyInfo\AssemblyInfo.csproj" />
    <ProjectReference Include="..\B2SServerPlugin\B2SServerPlugin.csproj" />
    <ProjectReference Include="..\DirectOutput\DirectOutput.csproj" />
    <ProjectReference Include="..\DirectOutput PinballX Plugin\DirectOutput PinballX Plugin.csproj" />
    <ProjectReference Include="..\DirectOutputComObject\DirectOutputComObject.vbproj" />
    <ProjectReference Include="..\DirectOutputComObjectRegister\DirectOutputComObjectRegister.csproj" />
    <ProjectReference Include="..\DirectOutputConfigTester\DirectOutputConfigTester.csproj" />
    <ProjectReference Include="..\GlobalConfigEditor\GlobalConfigEditor.csproj" />
    <ProjectReference Include="..\LedControlFileTester\LedControlFileTester.csproj" />
    <ProjectReference Include="..\ProPinballSlave\ProPinballSlave.csproj" />
    <!-- Use existing custom action projects -->
    <ProjectReference Include="..\DOFSetupPBXFixup\DOFSetupPBXFixup.csproj" />
    <ProjectReference Include="..\DOFSetupB2SFixup\DOFSetupB2SFixup.csproj" />
  </ItemGroup>
  
  <!-- WiX source files -->
  <ItemGroup>
    <Compile Include="Product.wxs" />
  </ItemGroup>

  <!-- WiX Extensions -->
  <ItemGroup>
    <PackageReference Include="WixToolset.UI.wixext" Version="6.0.2" />
  </ItemGroup>

</Project>